<p><img src="http://image.buscape.com/material/buscape.png" alt="enter image description here" title=""></p>



<h1 id="google-analytics"><strong>Google Analytics</strong></h1>

<hr>



<h2 id="padronização-de-disparos"><strong>Padronização de disparos</strong></h2>



<h3 id="objetivo"><strong>Objetivo</strong></h3>

<p>Para termos agilidade e precisão quando algum elemento precisa ser tagueado, enviaremos via back-end os disparos via  <strong>dataLayer.push</strong>. Assim, quando subir qualquer banner ou elemento novo no site, o GTM (Google Tag Manager) enviará automaticamente os dados coletados para o GA(Google Analytics). </p>



<h3 id="datalayer"><strong>dataLayer</strong></h3>

<p>dataLayer é uma variável global criada dentro do GTM. Ela é a camada de dados que usaremos para obter as informações de cada página, produto, listas, etc <br>
Usaremos o disparo de dataLayer.push para enviar dados de cliques, acessos ou interações para camada de dados. Ex:</p>

<pre><code>dataLayer.push({'event':'sucesso', 'tipo-sucesso':'transacao'});
</code></pre>

<p>Esse disparo acima, seria enviado quando o usuário chegasse a tela de Transação efetuada. O GTM receberia esse evento e dispararia dados para o GA informando que a transação foi efetuada.</p>



<h3 id="observações"><strong>Observações</strong></h3>

<ul>
<li>Todas as informações devem ser em caixa baixa e separadas por “_” Ex: este_exemplo.</li>
<li>Para que os dados de disparos de clicks funcionem é necessário que seja implementada a camada de dados de lista.</li>
<li>O disparo de impressões de Banners deve acontecer apenas na visualização do banner. Se o usuário sai do alcance do banner, não deve ser disparado mais.</li>
</ul>

<hr>

<h3 id="banners"><strong>Banners</strong></h3>

<p>No momento do clique do usuário em algum banner deve-se disparar:</p>



<h4 id="impressão-do-banner"><strong>Impressão do Banner</strong></h4>



<pre class="prettyprint"><code class="language-js hljs "> dataLayer.push({<span class="hljs-string">'event'</span>:<span class="hljs-string">'banner_impressao'</span>, <span class="hljs-string">'banner_nome'</span>:<span class="hljs-string">'dell'</span>, <span class="hljs-string">'banner_creative'</span>:<span class="hljs-string">'verao_notebooks'</span>,<span class="hljs-string">'banner_posicao'</span>:<span class="hljs-string">'1'</span>, <span class="hljs-string">'banner_nome_lista'</span>:<span class="hljs-string">'melhores_ofertas_home'</span>});

 dataLayer.push({<span class="hljs-string">'event'</span>:<span class="hljs-string">'banner_impressao'</span>, <span class="hljs-string">'banner_nome'</span>:<span class="hljs-string">'gradiente'</span>, <span class="hljs-string">'banner_creative'</span>:<span class="hljs-string">'gradiente_voltou'</span>,<span class="hljs-string">'banner_posicao'</span>:<span class="hljs-string">'2'</span>, <span class="hljs-string">'banner_nome_lista'</span>:<span class="hljs-string">'melhores_ofertas_home'</span>});

 dataLayer.push({<span class="hljs-string">'event'</span>:<span class="hljs-string">'banner_impressao'</span>, <span class="hljs-string">'banner_-nome'</span>:<span class="hljs-string">'magazine_luiza'</span>, <span class="hljs-string">'banner_creative'</span>:<span class="hljs-string">'lu_com_voce'</span>,<span class="hljs-string">'banner_posicao'</span>:<span class="hljs-string">'1'</span>, <span class="hljs-string">'banner_nome_lista'</span>:<span class="hljs-string">'promocoes_da_lu'</span>});

 dataLayer.push({<span class="hljs-string">'event'</span>:<span class="hljs-string">'banner_impressao'</span>, <span class="hljs-string">'banner_nome'</span>:<span class="hljs-string">'magazine_luiza'</span>, <span class="hljs-string">'banner_creative'</span>:<span class="hljs-string">'lu_e_sua_cozinha'</span>,<span class="hljs-string">'banner_posicao'</span>:<span class="hljs-string">'2'</span>, <span class="hljs-string">'banner_nome_lista'</span>:<span class="hljs-string">'promocoes_da_lu'</span>});</code></pre>

<table>
<thead>
<tr>
  <th>Chave</th>
  <th>Tipo de valor</th>
  <th>Definição</th>
  <th>Exemplo</th>
</tr>
</thead>
<tbody><tr>
  <td>event</td>
  <td>string</td>
  <td>nome do evento</td>
  <td>banner_impressao</td>
</tr>
<tr>
  <td>banner_nome</td>
  <td>string</td>
  <td>nome do banner impresso</td>
  <td>magazine_luiza</td>
</tr>
<tr>
  <td>banner_creative</td>
  <td>string</td>
  <td>nome da promoção ou criativo</td>
  <td>Lu_e_sua_cozinha</td>
</tr>
<tr>
  <td>banner_local</td>
  <td>string</td>
  <td>Local onde o banner está</td>
  <td>topo, rodape, meio, meio_esquerda</td>
</tr>
<tr>
  <td>banner_posicao</td>
  <td>string</td>
  <td>posicao do banner na lista</td>
  <td>1, 2, 3</td>
</tr>
<tr>
  <td>banner_nome_lista</td>
  <td>string</td>
  <td>Nome da lista onde o banner está inserido</td>
  <td>promocoes_da_lu, melhores_ofertas_home, sem_lista(Se não estiver em nenhuma lista)</td>
</tr>
</tbody></table>


<h4 id="click-do-banner"><strong>Click do Banner</strong></h4>



<pre class="prettyprint"><code class="language-js hljs ">dataLayer.push({<span class="hljs-string">'event'</span>:<span class="hljs-string">'banner_click'</span>, <span class="hljs-string">'banner_nome'</span>:<span class="hljs-string">'dell'</span>, <span class="hljs-string">'banner_creative'</span>:<span class="hljs-string">'verao_notebooks'</span>,<span class="hljs-string">'banner_posicao'</span>:<span class="hljs-string">'1'</span>, <span class="hljs-string">'banner_nome_lista'</span>:<span class="hljs-string">'melhores_ofertas_home'</span>});

dataLayer.push({<span class="hljs-string">'event'</span>:<span class="hljs-string">'banner_click'</span>, <span class="hljs-string">'banner_nome'</span>:<span class="hljs-string">'gradiente'</span>, <span class="hljs-string">'banner_creative'</span>:<span class="hljs-string">'gradiente_voltou'</span>,<span class="hljs-string">'banner_posicao'</span>:<span class="hljs-string">'2'</span>, <span class="hljs-string">'banner_nome_lista'</span>:<span class="hljs-string">'melhores_ofertas_home'</span>});

dataLayer.push({<span class="hljs-string">'event'</span>:<span class="hljs-string">'banner_click'</span>, <span class="hljs-string">'banner_nome'</span>:<span class="hljs-string">'magazine_luiza'</span>, <span class="hljs-string">'banner_creative'</span>:<span class="hljs-string">'lu_com_voce'</span>,<span class="hljs-string">'banner_posicao'</span>:<span class="hljs-string">'1'</span>, <span class="hljs-string">'banner_nome_lista'</span>:<span class="hljs-string">'promocoes_da_lu'</span>});

dataLayer.push({<span class="hljs-string">'event'</span>:<span class="hljs-string">'banner_click'</span>, <span class="hljs-string">'banner_nome'</span>:<span class="hljs-string">'magazine_luiza'</span>, <span class="hljs-string">'banner_creative'</span>:<span class="hljs-string">'lu_e_sua_cozinha'</span>,<span class="hljs-string">'banner_posicao'</span>:<span class="hljs-string">'2'</span>, <span class="hljs-string">'banner_nome_lista'</span>:<span class="hljs-string">'promocoes_da_lu'</span>});</code></pre>

<table>
<thead>
<tr>
  <th>Chave</th>
  <th>Tipo de valor</th>
  <th>Definição</th>
  <th>Exemplo</th>
</tr>
</thead>
<tbody><tr>
  <td>event</td>
  <td>string</td>
  <td>nome do evento</td>
  <td>banner_click</td>
</tr>
<tr>
  <td>banner_nome</td>
  <td>string</td>
  <td>nome do banner clicado</td>
  <td>magazine_luiza</td>
</tr>
<tr>
  <td>banner_creative</td>
  <td>string</td>
  <td>nome da promoção ou criativo</td>
  <td>Lu_e_sua_cozinha</td>
</tr>
<tr>
  <td>banner_local</td>
  <td>string</td>
  <td>Local onde o banner está</td>
  <td>topo, rodape, meio, meio_esquerda</td>
</tr>
<tr>
  <td>banner_posicao</td>
  <td>string</td>
  <td>posicao do banner na lista</td>
  <td>1, 2, 3</td>
</tr>
<tr>
  <td>banner_nome_lista</td>
  <td>string</td>
  <td>Nome da lista onde o banner está inserido</td>
  <td>promocoes_da_lu, melhores_ofertas_home, sem_lista(Se não estiver em nenhuma lista)</td>
</tr>
</tbody></table>


<hr>

<h3 id="botões"><strong>Botões</strong></h3>



<h4 id="ir-a-loja"><strong>Ir a Loja</strong></h4>

<p>No momento do clique do usuário em Ir a loja em <strong>qualquer lugar do site</strong>, deve-se disparar:</p>



<pre class="prettyprint"><code class="language-js hljs ">dataLayer.push({<span class="hljs-string">'event'</span>:<span class="hljs-string">'botao'</span>,<span class="hljs-string">'tipo_botao'</span>:<span class="hljs-string">'ir_a_loja'</span>, <span class="hljs-string">'id_oferta'</span>:<span class="hljs-string">'12345'</span>});

dataLayer.push({<span class="hljs-string">'event'</span>:<span class="hljs-string">'botao'</span>,<span class="hljs-string">'tipo-botao'</span>:<span class="hljs-string">'ir_a_loja'</span>, <span class="hljs-string">'id_oferta'</span>:<span class="hljs-string">'123123145'</span>});</code></pre>

<table>
<thead>
<tr>
  <th>Chave</th>
  <th>Tipo de valor</th>
  <th>Definição</th>
  <th>Exemplo</th>
</tr>
</thead>
<tbody><tr>
  <td>event</td>
  <td>string</td>
  <td>Evento disparado</td>
  <td>botao</td>
</tr>
<tr>
  <td>tipo_botao</td>
  <td>string</td>
  <td>Tipo de botão clicado</td>
  <td>ir-a-loja</td>
</tr>
<tr>
  <td>id_oferta</td>
  <td>string</td>
  <td>ID da oferta do item disparado</td>
  <td>123456</td>
</tr>
</tbody></table>


<h4 id="compre-aqui"><strong>Compre Aqui</strong></h4>

<p>No momento do clique do usuário em compre aqui em <strong>qualquer lugar do site</strong>, deve-se disparar:</p>



<pre class="prettyprint"><code class="language-js hljs ">
dataLayer.push({<span class="hljs-string">'event'</span>:<span class="hljs-string">'botao'</span>,<span class="hljs-string">'tipo_botao'</span>:<span class="hljs-string">'compre_aqui'</span>, <span class="hljs-string">'id_oferta'</span>:<span class="hljs-string">'12345'</span>});

dataLayer.push({<span class="hljs-string">'event'</span>:<span class="hljs-string">'botao'</span>,<span class="hljs-string">'tipo-botao'</span>:<span class="hljs-string">'compre_aqui'</span>, <span class="hljs-string">'id_oferta'</span>:<span class="hljs-string">'312123'</span>});</code></pre>

<table>
<thead>
<tr>
  <th>Chave</th>
  <th>Tipo de valor</th>
  <th>Definição</th>
  <th>Exemplo</th>
</tr>
</thead>
<tbody><tr>
  <td>event</td>
  <td>string</td>
  <td>Evento disparado</td>
  <td>botao</td>
</tr>
<tr>
  <td>tipo_botao</td>
  <td>string</td>
  <td>Tipo de botão clicado</td>
  <td>compre_aqui</td>
</tr>
<tr>
  <td>id_oferta</td>
  <td>string</td>
  <td>ID da oferta do item disparado</td>
  <td>123456</td>
</tr>
</tbody></table>


<h4 id="comprar"><strong>Comprar</strong></h4>

<p>No momento do clique do usuário em comprar aqui em <strong>qualquer página de oferta</strong>, deve-se disparar:</p>



<pre class="prettyprint"><code class="language-js hljs ">dataLayer.push({<span class="hljs-string">'event'</span>:<span class="hljs-string">'botao'</span>,<span class="hljs-string">'tipo_botao'</span>:<span class="hljs-string">'comprar'</span>, <span class="hljs-string">'id_oferta'</span>:<span class="hljs-string">'12345'</span>});

dataLayer.push({<span class="hljs-string">'event'</span>:<span class="hljs-string">'botao'</span>,<span class="hljs-string">'tipo-botao'</span>:<span class="hljs-string">'comprar'</span>, <span class="hljs-string">'id_oferta'</span>:<span class="hljs-string">'1233123145'</span>});</code></pre>

<table>
<thead>
<tr>
  <th>Chave</th>
  <th>Tipo de valor</th>
  <th>Definição</th>
  <th>Exemplo</th>
</tr>
</thead>
<tbody><tr>
  <td>event</td>
  <td>string</td>
  <td>Evento disparado</td>
  <td>botao</td>
</tr>
<tr>
  <td>tipo_botao</td>
  <td>string</td>
  <td>Tipo de botão clicado</td>
  <td>comprar</td>
</tr>
<tr>
  <td>id_oferta</td>
  <td>string</td>
  <td>ID da oferta do item disparado</td>
  <td>123456</td>
</tr>
</tbody></table>


<hr>

<h3 id="login"><strong>Login</strong></h3>

<p>Adicionar os seguintes disparos quando o usuário se logar:</p>



<pre class="prettyprint"><code class="language-html hljs ">dataLayer.push({'event':'sucesso', 'tipo-sucesso':'login', 'tipo-login':'facebook'});</code></pre>

<h3 id="cadastro"><strong>Cadastro</strong></h3>

<p>Adicionar os seguintes disparos quando o usuário se cadastrar:</p>



<pre class="prettyprint"><code class="language-js hljs ">dataLayer.push({<span class="hljs-string">'event'</span>:<span class="hljs-string">'sucesso'</span>, <span class="hljs-string">'tipo-sucesso'</span>:<span class="hljs-string">'cadastro'</span>});</code></pre>